' Code Copyright (c) 2022 Thomas Hugo Williams
' License MIT <https://opensource.org/licenses/MIT>
' For MMBasic 5.07.03

Option Base 0
Option Default None
Option Explicit On
Option LcdPanel NoConsole

#Include "ctrl.ipp"
#Include "utility.inc"
#Include "highscr.inc"
#Include "sound.inc"

Select Case Mm.Device$
  Case "Colour Maximite 2", "Colour Maximite 2 G2"
    Const USE_PATH% = 1
    Const USE_MODE% = 7
  Case "MMBasic for Windows"
    Const USE_PATH% = 1
    Const USE_MODE% = 7
  Case "PicoMite"
    Const USE_PATH% = 0
    Const USE_MODE% = -1
  Case "PicoMiteVGA"
    Const USE_PATH% = 0
    Const USE_MODE% = 2
  Case Else
    Error "Unsupported device: " + Mm.Device$
End Select

If USE_PATH% Then
  Const HIGHSCORE_FILENAME$ = Mm.Info(Path) + "high-scores/test.csv"
Else
  Const HIGHSCORE_FILENAME$ = "/high-scores/test.csv"
EndIf

Dim ctrl$
Dim CTRLS_TO_POLL$(1) = ("atari_a", "nes_a")

Mode USE_MODE%
Cls

sound.init()
highscr.init(HIGHSCORE_FILENAME$, "highscore_data")
Do
  ctrl$ = highscr.show_table$(CTRLS_TO_POLL$(), 0)
  highscr.edit(Int(4 * Rnd()) + 1, Int(10 * Rnd()), Rgb(Red), ctrl$)
Loop

End

highscore_data:

Data "TOM, 2000"
Data "MICKEY, 1500"
Data "MIKE, 1250"
Data "PETER, 1000"
Data "DAVEY, 800"
Data "JOHN, 600"
Data "PAUL, 400"
Data "GEORGE, 200"
Data "RINGO, 100"
Data "MOOSE, 50"
